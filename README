This is a port of Linux kernel for the RISC-V architecture.
Development is currently based on the 3.4 long-term support branch.

Building this kernel
====================
Obtain RISC-V architecture-dependent subtree and overlay sources from upstream:

	$ git clone https://github.com/ucb-bar/riscv-linux.git linux-3.4.76
	$ curl https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.4.76.tar.xz | tar -xJk

Generate default kernel configuration:

	$ make ARCH=riscv defconfig

Edit configuration via an ncurses interface:

	$ make ARCH=riscv menuconfig

Build static kernel image:

	$ make ARCH=riscv -j vmlinux

Run the kernel image:

	$ spike +disk=/path/to/root.img vmlinux


Building riscv-gcc and glibc against this kernel
================================================
Linux headers are already available in the riscv-gcc repository.

If headers are changed, export them to the riscv-gcc installation directory:

	$ make ARCH=riscv headers_check
	$ make ARCH=riscv headers_install INSTALL_HDR_PATH=/path/to/riscv-gcc/linux-headers

Build riscv-gcc with the linux target:

	$ make linux INSTALL_DIR=/path/to/install

